<!-- templates/results.html -->
<!doctype html>
<title>Transcription Results</title>
<h1>Transcription Results</h1>

<p>Processing time: {{ processing_time }}</p>

<table>
    <tr>
        <th>Segment</th>
        <th>Start Time</th>
        <th>End Time</th>
    </tr>
    {% for id, segment in enumerate(transcription) %}
    <tr class="segment" onclick="toggleWords('{{ id }}')">
        <td>{{ segment.text }}</td>
        <td>{{ segment.start_time }}</td>
        <td>{{ segment.end_time }}</td>
    </tr>
    <tr id="words-{{ id }}" style="display: none;">
        <td colspan="3">
            <table>
                <tr>
                    <th>Word</th>
                    <th>Start Time</th>
                    <th>End Time</th>
                </tr>
                {% for word in segment.words %}
                <tr>
                    <td>{{ word.text }}</td>
                    <td>{{ word.start_time }}</td>
                    <td>{{ word.end_time }}</td>
                </tr>
                {% endfor %}
            </table>
        </td>
    </tr>
    {% endfor %}
</table>

<script>
function toggleWords(segmentId) {
    var wordsRow = document.getElementById('words-' + segmentId);
    if (wordsRow.style.display === "none") {
        wordsRow.style.display = "table-row";
    } else {
        wordsRow.style.display = "none";
    }
}
</script>